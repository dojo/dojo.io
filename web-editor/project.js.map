{"version":3,"file":"project.js","sourceRoot":"","sources":["../src/project.ts"],"names":[],"mappings":"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","sourcesContent":["import 'vs/editor/editor.main'; /* imported for side-effects */\n\nimport { ProjectJson, ProjectFile, ProjectFileType } from '@dojo/cli-export-project/interfaces/project.json';\nimport Evented from '@dojo/core/Evented';\nimport { assign } from '@dojo/core/lang';\nimport request from '@dojo/core/request';\nimport { find, includes } from '@dojo/shim/array';\nimport WeakMap from '@dojo/shim/WeakMap';\nimport { DiagnosticMessageChain, OutputFile } from 'typescript';\nimport { getDefinitions, getEmit as getCssEmit } from './support/css';\nimport { getEmit as getJsonEmit } from './support/json';\n\nimport { EmitFile, PromiseLanguageService, TypeScriptWorker } from './interfaces';\n\n/**\n * Interface for private `ProjectFile` data the project needs to track for project files.\n */\ninterface ProjectFileData {\n\t/**\n\t * Set to `true` if the model for the file has been updated in the editor, otherwise `false`.\n\t */\n\tdirty?: boolean;\n\n\t/**\n\t * Extra Lib Handle.  When registering files as extra libs in the TypeScript defaults in monaco-editor and we\n\t * subsequently need to update them, we need to store the handle to remove them from the environment.\n\t */\n\textraLibHandle?: monaco.IDisposable;\n\n\t/**\n\t * The associated monaco-editor model for a project file object.\n\t */\n\tmodel?: monaco.editor.IModel;\n}\n\n/**\n * Flatten a TypeScript diagnostic message\n *\n * Ported from `typescript` due to the fact that this is not exposed via `monaco-editor`\n *\n * @param messageText The text of the diagnostic message\n * @param newLine The newline character to use when flattening\n */\nfunction flattenDiagnosticMessageText(messageText: string | DiagnosticMessageChain, newLine: string): string {\n\tif (typeof messageText === 'string') {\n\t\treturn messageText;\n\t}\n\telse {\n\t\tlet diagnosticChain = messageText;\n\t\tlet result = '';\n\n\t\tlet indent = 0;\n\t\twhile (diagnosticChain) {\n\t\t\tif (indent) {\n\t\t\t\tresult += newLine;\n\n\t\t\t\tfor (let i = 0; i < indent; i++) {\n\t\t\t\t\tresult += '  ';\n\t\t\t\t}\n\t\t\t}\n\t\t\tresult += diagnosticChain.messageText;\n\t\t\tindent++;\n\t\t\tdiagnosticChain = diagnosticChain.next!;\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\n/**\n * Create a monaco-editor model for the specified project file\n * @param param0 The project file to create the model from\n */\nfunction createMonacoModel({ name: filename, text, type }: ProjectFile): monaco.editor.IModel {\n\treturn monaco.editor.createModel(text, getLanguageFromType(type), monaco.Uri.file(filename));\n}\n\n/**\n * Convert a `ProjectFileType` to a monaco-editor language\n * @param type The type to get a monaco-editor language for\n */\nfunction getLanguageFromType(type: ProjectFileType): string {\n\tswitch (type) {\n\tcase ProjectFileType.Definition:\n\tcase ProjectFileType.TypeScript:\n\tcase ProjectFileType.Lib:\n\t\treturn 'typescript';\n\tcase ProjectFileType.HTML:\n\t\treturn 'html';\n\tcase ProjectFileType.JavaScript:\n\t\treturn 'javascript';\n\tcase ProjectFileType.Markdown:\n\t\treturn 'markdown';\n\tcase ProjectFileType.CSS:\n\t\treturn 'css';\n\tcase ProjectFileType.SourceMap:\n\tcase ProjectFileType.JSON:\n\t\treturn 'json';\n\tcase ProjectFileType.PlainText:\n\t\treturn 'plaintext';\n\tcase ProjectFileType.XML:\n\t\treturn 'xml';\n\tdefault:\n\t\treturn 'unknown';\n\t}\n}\n\ntype ScriptTarget = monaco.languages.typescript.ScriptTarget;\nconst ScriptTarget = monaco.languages.typescript.ScriptTarget;\n\nfunction getScriptTarget(type: string): ScriptTarget {\n\tswitch (type) {\n\tcase 'es3':\n\t\treturn ScriptTarget.ES3;\n\tcase 'es5':\n\t\treturn ScriptTarget.ES5;\n\tcase 'es6':\n\tcase 'es2015':\n\t\treturn ScriptTarget.ES2015;\n\tcase 'es7':\n\tcase 'es2016':\n\t\treturn ScriptTarget.ES2016;\n\tcase 'es8':\n\tcase 'es2017':\n\t\treturn ScriptTarget.ES2017;\n\tcase 'esnext':\n\t\treturn ScriptTarget.ESNext;\n\tcase 'latest':\n\tdefault:\n\t\treturn ScriptTarget.ES5;\n\t}\n}\n\nexport class Project extends Evented {\n\t/**\n\t * The loaded project bundle structure\n\t */\n\tprivate _project: ProjectJson | undefined;\n\n\t/**\n\t * A map of meta data related to project files\n\t */\n\tprivate _fileMap = new WeakMap<ProjectFile, ProjectFileData>();\n\n\t/**\n\t * Check if there are any emit errors for a given file\n\t * @param services The language services to check\n\t * @param filename The reference filename\n\t */\n\tprivate async _checkEmitErrors(services: PromiseLanguageService, filename: string): Promise<void> {\n\t\tconst diagnostics = [\n\t\t\t...await services.getCompilerOptionsDiagnostics(),\n\t\t\t...await services.getSemanticDiagnostics(filename),\n\t\t\t...await services.getSyntacticDiagnostics(filename)\n\t\t];\n\n\t\tdiagnostics.forEach((diagnostic) => {\n\t\t\tconst message = flattenDiagnosticMessageText(diagnostic.messageText, '\\n');\n\t\t\tif (diagnostic.file) {\n\t\t\t\tconst { line, character } = diagnostic.file.getLineAndCharacterOfPosition(diagnostic.start);\n\t\t\t\tconsole.warn(`Error ${diagnostic.file.name} (${line + 1},${character + 1}): ${message}`);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.warn(`Error: ${message}`);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * An async function which resolves with the parsed text of the project bundle\n\t * @param filename The filename to load the bundle from\n\t */\n\tprivate async _loadBundle(filename: string): Promise<void> {\n\t\tthis._project = JSON.parse(await (await request(filename)).text());\n\t}\n\n\t/**\n\t * Retrieve the project file meta data being tracked by the project\n\t * @param file The project file\n\t */\n\tprivate _getProjectFileData(file: ProjectFile): ProjectFileData {\n\t\tif (!this._fileMap.has(file)) {\n\t\t\tthis._fileMap.set(file, {});\n\t\t}\n\t\treturn this._fileMap.get(file);\n\t}\n\n\t/**\n\t * The the environment files in the monaco-editor environment.  These are the \"non-editable\" files which support the\n\t * project and are usually additional type definitions that the project depends upon.\n\t */\n\tprivate _setEnvironmentFiles(): void {\n\t\tthis._project!.environmentFiles.forEach(({ name: filename, text, type }) => {\n\t\t\tmonaco.languages.typescript.typescriptDefaults.addExtraLib(text, (type === ProjectFileType.Lib ? '' : 'file:///') + filename);\n\t\t});\n\t}\n\n\t/**\n\t * Ensure that any TypeScript project fies are part of the environment, so that TypeScript files can be edited with\n\t * the full context of the project.\n\t */\n\tprivate _setProjectFiles(): void {\n\t\tthis._project!.files.forEach((file) => {\n\t\t\tconst { name: filename, text, type } = file;\n\t\t\tif (type === ProjectFileType.TypeScript || type === ProjectFileType.Definition) {\n\t\t\t\tconst fileData = this._getProjectFileData(file);\n\t\t\t\tfileData.extraLibHandle = monaco.languages.typescript.typescriptDefaults.addExtraLib(text, 'file:///' + filename);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Set the compiler options for the TypeScript environment based on what is provided by the project bundle, combined\n\t * with additional settings that are required for use in the web-editor.\n\t */\n\tprivate _setTypeScriptEnvironment(): void {\n\t\ttype CompilerOptions = monaco.languages.typescript.CompilerOptions;\n\t\tconst { compilerOptions = {} } = this._project!.tsconfig;\n\t\tconst options: CompilerOptions = {};\n\n\t\t/* copied from tsconfig.json */\n\t\tconst { experimentalDecorators, lib, noImplicitAny, noImplicitThis, noImplicitReturns, noLib, noUnusedLocals, noUnusedParameters, strictNullChecks, target, types } = compilerOptions;\n\t\tassign(options, <CompilerOptions> {\n\t\t\texperimentalDecorators,\n\t\t\tlib,\n\t\t\tnoImplicitAny,\n\t\t\tnoImplicitThis,\n\t\t\tnoImplicitReturns,\n\t\t\tnoLib,\n\t\t\tnoUnusedLocals,\n\t\t\tnoUnusedParameters,\n\t\t\tstrictNullChecks,\n\t\t\ttarget: getScriptTarget(target),\n\t\t\ttypes\n\t\t});\n\n\t\t/* asserted for web editing */\n\t\tassign(options, <CompilerOptions> {\n\t\t\tallowNonTsExtensions: true, /* needed for compiling like this */\n\t\t\tinlineSources: true, /* we will embed the sources in the source maps */\n\t\t\tmodule: monaco.languages.typescript.ModuleKind.AMD, /* only support AMD, so only compile to AMD */\n\t\t\tmoduleResolution: monaco.languages.typescript.ModuleResolutionKind.NodeJs, /* only support this for of module resolution */\n\t\t\tnoEmitHelpers: true, /* we will add the helpers later */\n\t\t\tsourceMap: true /* we will generate sourcemaps and remap them when we add them to the page */\n\t\t});\n\n\t\tmonaco.languages.typescript.typescriptDefaults.setCompilerOptions(options);\n\t}\n\n\t/**\n\t * Flush any changes that have come from the editor back into the project files.\n\t */\n\tprivate _updateBundle(): void {\n\t\tif (!this._project) {\n\t\t\treturn;\n\t\t}\n\t\tthis._project.files\n\t\t\t.filter(({ name }) => this.isFileDirty(name))\n\t\t\t.forEach((file) => {\n\t\t\t\tfile.text = this.getFileModel(file.name).getValue();\n\t\t\t\tthis.setFileDirty(file.name, true);\n\t\t\t});\n\t}\n\n\t/**\n\t * Update a CSS Module by updating its definition file and adding it to the environment.\n\t * @param cssModuleFile The CSS Module to update\n\t */\n\tprivate async _updateCssModule(cssModuleFile: ProjectFile): Promise<void> {\n\t\tcssModuleFile.text = this._getProjectFileData(cssModuleFile).model!.getValue();\n\t\tlet definitionFile = (await getDefinitions(cssModuleFile))[0];\n\t\tconst existingDefinition = find(this._project!.files, (({ name }) => name === definitionFile.name));\n\t\tif (existingDefinition) {\n\t\t\texistingDefinition.text = definitionFile.text;\n\t\t\tdefinitionFile = existingDefinition;\n\t\t}\n\t\telse {\n\t\t\tthis._project!.files.push(definitionFile);\n\t\t}\n\n\t\t/* update the extraLib for the definition file */\n\t\tconst { name, text } = definitionFile;\n\t\tconst fileData = this._getProjectFileData(definitionFile);\n\t\tif (fileData.extraLibHandle) {\n\t\t\tfileData.extraLibHandle.dispose();\n\t\t}\n\t\tfileData.extraLibHandle = monaco.languages.typescript.typescriptDefaults.addExtraLib(text, 'file:///' + name);\n\t}\n\n\t/**\n\t * Take the currently loaded project and emit it\n\t */\n\tasync emit(): Promise<EmitFile[]> {\n\t\tif (!this._project) {\n\t\t\tthrow new Error('Project not loaded.');\n\t\t}\n\n\t\tconst typescriptFileUris = this._project.files\n\t\t\t.filter(({ type }) => type === ProjectFileType.Definition || type === ProjectFileType.TypeScript)\n\t\t\t.map(({ name }) => this.getFileModel(name).uri);\n\t\tconst worker: TypeScriptWorker = await monaco.languages.typescript.getTypeScriptWorker();\n\t\tconst services = await worker(...typescriptFileUris);\n\n\t\tconst output = await Promise.all(typescriptFileUris.map(async (file) => {\n\t\t\tconst filename = file.toString();\n\t\t\tconst emitOutput = await services.getEmitOutput(filename);\n\t\t\tawait this._checkEmitErrors(services, filename);\n\t\t\treturn emitOutput;\n\t\t}));\n\n\t\tconst cssFiles = await getCssEmit(...this._project.files /* add css modules */\n\t\t\t.filter(({ type }) => type === ProjectFileType.CSS)\n\t\t\t.map(({ name, type }) => { return { model: this.getFileModel(name), type }; })\n\t\t\t.map(({ model, type }) => { return { name: model.uri.fsPath.replace(/^\\/\\.\\//, ''), text: model.getValue(), type }; }));\n\n\t\tconst jsonFiles = getJsonEmit(...this._project.files /* add json files as a module */\n\t\t\t.filter(({ type }) => type === ProjectFileType.JSON)\n\t\t\t.map(({ name, type }) => { return { model: this.getFileModel(name), type }; })\n\t\t\t.map(({ model, type }) => { return { name: model.uri.fsPath.replace(/^\\/\\.\\//, ''), text: model.getValue(), type }; }));\n\n\t\tconst otherFiles = this._project.files /* add on other project files */\n\t\t\t.filter(({ type }) => type !== ProjectFileType.Definition && type !== ProjectFileType.TypeScript && type !== ProjectFileType.CSS && type !== ProjectFileType.JSON)\n\t\t\t.map(({ name, type }) => { return { model: this.getFileModel(name), type }; })\n\t\t\t.map(({ model, type }) => { return { name: model.uri.fsPath.replace(/^\\/\\.\\//, ''), text: model.getValue(), type }; });\n\n\t\treturn output\n\t\t\t.reduce((previous, output) => previous.concat(output.outputFiles), [] as OutputFile[])\n\t\t\t.map(({ text, name }) => { /* conform to emitted file format */\n\t\t\t\treturn {\n\t\t\t\t\ttext,\n\t\t\t\t\tname: name.replace('file:///', ''),\n\t\t\t\t\ttype: /^(.*\\.(?!map$))?[^.]*$/.test(name) ? ProjectFileType.JavaScript : ProjectFileType.SourceMap\n\t\t\t\t};\n\t\t\t})\n\t\t\t.concat(cssFiles, jsonFiles, otherFiles);\n\t}\n\n\t/**\n\t * Return the currently loaded project bundle.\n\t */\n\tget(): ProjectJson | undefined {\n\t\tthis._updateBundle();\n\t\treturn this._project;\n\t}\n\n\t/**\n\t * The package dependencies for this project\n\t * @param includeDev If `true` it will include development dependencies.  Defaults to `false`.\n\t */\n\tgetDependencies(includeDev = false): { [pkg: string]: string } {\n\t\tif (!this._project) {\n\t\t\tthrow new Error('Project not loaded.');\n\t\t}\n\t\treturn assign({}, this._project.dependencies.production, includeDev ? this._project.dependencies.development : undefined);\n\t}\n\n\t/**\n\t * Retrieve a project file based on the file name from the project bundle, or return `undefined` if the file is not part of\n\t * the project.\n\t * @param filename The file name of the project file\n\t */\n\tgetFile(filename: string): ProjectFile | undefined {\n\t\tif (!this._project) {\n\t\t\tthrow new Error('Project not loaded.');\n\t\t}\n\t\treturn find(this._project.files, ({ name }) => name === filename);\n\t}\n\n\t/**\n\t * Return an array of `ProjectFile` objects which are the files associated with the project.  By default it returns all of\n\t * the files, but to filer based on file type, pass additional arguments of the file types to filter on.\n\t * @param types Return only files that match these project file types\n\t */\n\tgetFiles(...types: ProjectFileType[]): ProjectFile[] {\n\t\tif (!this._project) {\n\t\t\tthrow new Error('Project not loaded.');\n\t\t}\n\t\tconst filenames = this._project.files.map(({ name }) => name);\n\t\t/* while sometimes, CSS Modules Definition files are included in a project bundle, and need to be part of the environment, they\n\t\t * shouldn't be editable and therefore we won't return them */\n\t\treturn this._project.files\n\t\t\t.filter(({ name, type }) => !(type === ProjectFileType.Definition && includes(filenames, name.replace(/\\.d\\.ts$/, ''))) && (types.length ? includes(types, type) : true));\n\t}\n\n\t/**\n\t * Return a monaco-editor model for a specified file name.  Will throw if the filename is not part of the project.\n\t * @param filename The file name of the project file\n\t */\n\tgetFileModel(filename: string): monaco.editor.IModel {\n\t\tconst file = this.getFile(filename);\n\t\tif (!file) {\n\t\t\tthrow new Error(`File \"${filename}\" is not part of the project.`);\n\t\t}\n\t\tconst fileData = this._getProjectFileData(file);\n\t\tif (!fileData.model) {\n\t\t\tfileData.model = createMonacoModel(file);\n\t\t}\n\t\treturn fileData.model;\n\t}\n\n\t/**\n\t * Return an array of strings which are the names of the project files associated with the project.  By default it returns\n\t * all of the files, but to filter based on file type, pass additional arguments of the file types to filter on.\n\t * @param types Return only files that match these project file types\n\t */\n\tgetFileNames(...types: ProjectFileType[]): string[] {\n\t\treturn this.getFiles(...types)\n\t\t\t.map(({ name }) => name);\n\t}\n\n\t/**\n\t * Retrieve the text of the file from the project\n\t * @param filename The file name of the project file\n\t */\n\tgetFileText(filename: string): string {\n\t\treturn this.getFileModel(filename).getValue();\n\t}\n\n\t/**\n\t * Retrieve the text for the index HTML that has been specified in the project\n\t */\n\tgetIndexHtml(): string {\n\t\tif (!this._project) {\n\t\t\tthrow new Error('Project not loaded.');\n\t\t}\n\t\treturn this.getFileText(this._project.index);\n\t}\n\n\t/**\n\t * Return `true` if the specified file name is part of the project, otherwise `false`.\n\t * @param filename The file name\n\t */\n\tincludes(filename: string): boolean {\n\t\treturn Boolean(this._project && includes(this.getFileNames(), filename));\n\t}\n\n\t/**\n\t * Determine if a file, by name is _dirty_ and has not had its contents updated in the project bundle once being edited\n\t * in the editor.\n\t * @param filename The file name\n\t */\n\tisFileDirty(filename: string): boolean {\n\t\tconst file = this.getFile(filename);\n\t\treturn Boolean(file && this._getProjectFileData(file).dirty);\n\t}\n\n\t/**\n\t * Returns `true` if the project is loaded, otherwise `false`\n\t */\n\tisLoaded(): boolean {\n\t\treturn Boolean(this._project);\n\t}\n\n\t/**\n\t * An async function which loads a project JSON bundle file and sets the monaco-editor environment to be\n\t * to edit the project.\n\t * @param filename The project bundle to load\n\t */\n\tasync load(filename: string): Promise<void> {\n\t\tif (this._project) {\n\t\t\tthrow new Error('Project is already loaded.');\n\t\t}\n\t\tawait this._loadBundle(filename);\n\t\tthis._setTypeScriptEnvironment();\n\t\tthis._setEnvironmentFiles();\n\t\tthis._setProjectFiles();\n\t}\n\n\t/**\n\t * Set (or unset) the file _dirty_ flag on a project file\n\t * @param filename The file name\n\t * @param reset Set to `true` to unset the _dirty_ flag on the file\n\t */\n\tsetFileDirty(filename: string, reset?: boolean): void {\n\t\tconst file = this.getFile(filename);\n\t\tif (!file) {\n\t\t\tthrow new Error(`File \"${filename}\" is not part of the project.`);\n\t\t}\n\t\tif (file.type === ProjectFileType.CSS) {\n\t\t\t/* the functionality of this method negates setting the dirty flag, so we won't */\n\t\t\tthis._updateCssModule(file);\n\t\t}\n\t\telse {\n\t\t\tthis._getProjectFileData(file).dirty = !reset;\n\t\t}\n\t}\n}\n\n/* create singleton instance of project for default export */\nconst project = new Project();\nexport default project;\n"]}